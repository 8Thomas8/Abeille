<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Ikea</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(4);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Ikea</h1>
<span id="author">KiwiHC16</span><br />
<div id="toc">
  <div id="toctitle">Table des matières</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_home">1. Home</h2>
<div class="sectionbody">
<div class="paragraph"><p>Retour au <a href="index.html">document principal</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_ampoule">2. Ampoule</h2>
<div class="sectionbody">
</div>
</div>
<div class="sect1">
<h2 id="_mémo">3. Mémo</h2>
<div class="sectionbody">
<div class="paragraph"><p>Un petit mémo avec la télécommande Hue à 20€ pour ceux qui, comme moi, vont devoir ré-inclure toutes leurs ampoules Ikea avec l&#8217;upgrade en 3.0F&#8230;</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
On appuie sur ON + OFF ( 1 + 0) simultanément pendant 5 secondes à 50 cm de l’ampoule (sous tension bien entendu)
</p>
</li>
<li>
<p>
On ouvre le réseau ZigBee de votre coordinateur (ZiGate par exemple)
</p>
</li>
<li>
<p>
On éteint puis on remet sous tension l’ampoule qui s’appaire au coordinateur
</p>
</li>
<li>
<p>
Pendant que le réseau est ouvert, on retourne la télécommande et à l’aide d’un trombone, on appuie sur le bouton setup pendant 5-10 secondes.
</p>
</li>
<li>
<p>
La télécommande joint à son tour le réseau ZigBee
</p>
</li>
<li>
<p>
Si on le souhaite, on peut associer la télécommande et l’ampoule en maintenant le bouton ON (1) pendant 5 secondes à 50 cm de l’ampoule (toujours sous tension).
</p>
</li>
</ol></div>
<div class="sect2">
<h3 id="_nouvelle_inclusion">3.1. Nouvelle inclusion</h3>
<div class="ulist"><ul>
<li>
<p>
Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter&#8230;
</p>
</li>
<li>
<p>
Faire un reset de l&#8217;ampoule en partant de la position allumée, puis 6 fois, éteindre-allumer. Il n&#8217;est pas facile d&#8217;avoir le reset&#8230; et après maintes tentatives, vous devriez récupérer l&#8217;ampoule dans Jeedom. Autre solution bien plus simple utiliser une télécommande Philips Hue (Hue Dimmer Switch) et forcer le reset par un bouton I + bouton O appuyés suffisamment longtemps. Une fois associée, il est possible d&#8217;avoir besoin d'éteindre, attendre 10 secondes et allumer.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_déjà_inclue">3.2. Déjà inclue</h3>
<div class="ulist"><ul>
<li>
<p>
Zigate en fonctionnement normale
</p>
</li>
<li>
<p>
Éteindre l&#8217;ampoule 15s puis la rallumer
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_compléments">3.3. Compléments</h3>
<div class="paragraph"><p>Compléments d&#8217;informations</p></div>
<div class="sect3">
<h4 id="_identify">3.3.1. Identify</h4>
<div class="paragraph"><p>Bouton Identify</p></div>
<div class="paragraph"><p>Ce bouton est créé au moment de la création de l&#8217;objet. Celui ci permet de demander à l&#8217;ampoule de se manifester. Elle se met à changer d&#8217;intensité ce qui nous permet de la repérer dans une groupe d&#8217;ampoules par exemple.</p></div>
</div>
<div class="sect3">
<h4 id="_bind">3.3.2. Bind</h4>
<div class="paragraph"><p>Bind spécifique:</p></div>
<div class="paragraph"><p>Identifiez l&#8217;ampoule que vous voulez paramétrer:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018-02_21_a_23_26_56.png" alt="Capture_d_ecran_2018-02_21_a_23_26_56.png" />
</span></p></div>
<div class="paragraph"><p>Récupérer son adresse IEEE, son adresse courte (ici 6766).</p></div>
<div class="paragraph"><p>De même, dans l&#8217;objet Ruche récupérez l&#8217;adresse IEEE (Si l&#8217;info n&#8217;est pas dispo, un reset de la Zigate depuis l objet ruche doit faire remonter l&#8217;information).</p></div>
<div class="paragraph"><p>Mettre dans le champ:</p></div>
<div class="ulist"><ul>
<li>
<p>
Titre, l&#8217;adresse IEEE de l&#8217;ampoule que vous voulez paramétrer
</p>
</li>
<li>
<p>
Message, le cluster qui doit être rapporté, et l adresse IEEE de la Zigate.
</p>
</li>
</ul></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_21_a_23_26_49.png" alt="Capture_d_ecran_2018_02_21_a_23_26_49.png" />
</span></p></div>
<div class="paragraph"><p>Attention la capture d'écran n&#8217;est pas à jour pour le deuxième champs.</p></div>
<div class="paragraph"><p>Dans message mettre:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>targetExtendedAddress=XXXXXXXXXXXXXXXX&amp;targetEndpoint=YY&amp;ClusterId=ZZZZ&amp;reportToAddress=AAAAAAAAAAAAAAAA</code></pre>
</div></div>
<div class="paragraph"><p>Exemple avec tous les paramètres:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>targetExtendedAddress=90fd9ffffe69131d&amp;targetEndpoint=01&amp;ClusterId=0006&amp;reportToAddress=00158d00019a1b22</code></pre>
</div></div>
<div class="paragraph"><p>Après clic sur Bind, vous devriez voir passer dans le log AbeilleParser (en mode debug) un message comme:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_21_a_23_27_29.png" alt="Capture_d_ecran_2018_02_21_a_23_27_29.png" />
</span></p></div>
<div class="paragraph"><p>qui confirme la prise en compte par l&#8217;ampoule. Status 00 si Ok.</p></div>
</div>
<div class="sect3">
<h4 id="_rapport_manuel">3.3.3. Rapport Manuel</h4>
<div class="paragraph"><p>Ensuite paramétrer l&#8217;envoie de rapport:</p></div>
<div class="ulist"><ul>
<li>
<p>
Titre, l&#8217;adresse courte de l&#8217;ampoule
</p>
</li>
<li>
<p>
Message, le cluster et le paramètre dans le cluster
</p>
</li>
</ul></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_21_a_23_29_11.png" alt="Capture_d_ecran_2018_02_21_a_23_29_11.png" />
</span></p></div>
<div class="paragraph"><p>Attention a capture d'écran n&#8217;est pas à jour pour le deuxième champs.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>targetEndpoint=01&amp;ClusterId=0006&amp;AttributeType=10&amp;AttributeId=0000 pour retour d'état ampoule Ikea

targetEndpoint=01&amp;ClusterId=0008&amp;AttributeType=20&amp;AttributeId=0000 pour retour de niveau ampoule Ikea</code></pre>
</div></div>
<div class="paragraph"><p>De même vous devriez voir passer dans le log AbeilleParse (en mode debug) un message comme:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_21_a_23_29_49.png" alt="Capture_d_ecran_2018_02_21_a_23_29_49.png" />
</span></p></div>
<div class="paragraph"><p>qui confirme la prise en compte par l&#8217;ampoule. Status 00 si Ok.</p></div>
<div class="paragraph"><p>Après sur un changement d'état l&#8217;ampoule doit remonter l&#8217;info vers Abeille, avec des messages comme:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_21_a_23_31_11.png" alt="Capture_d_ecran_2018_02_21_a_23_31_11.png" />
</span></p></div>
<div class="paragraph"><p>pour un retour Off de l&#8217;ampoule.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_télécommande">4. Télécommande</h2>
<div class="sectionbody">
<div class="paragraph"><p>Télécommande Ronde 5 boutons</p></div>
<div class="sect2">
<h3 id="_télécommande_réelle">4.1. Télécommande réelle</h3>
<div class="paragraph"><p>(Pour l&#8217;instant c&#8217;est aux équipements qui reçoivent les demandes de la télécommande réelle de renvoyer leur état vers Jeedom, sur un appui bouton télécommande, la Zigate ne transmet rien au plugin Abeille, à partir du firmware 3.0f on peut récupérer des appuis sur les boutons de la télécommande avec une configuration spécifique, voir ci dessous).</p></div>
<div class="paragraph"><p>Pour créer l&#8217;objet Abeille Automatiquement,</p></div>
<div class="sect3">
<h4 id="_solution_1">4.1.1. Solution 1</h4>
<div class="paragraph"><p>Première solution:</p></div>
<div class="paragraph"><p>Faire une inclusion de la télécommande et un objet doit être créé.
Ensuite paramétrer l&#8217;adresse du groupe comme indiqué ci dessous (voir deuxième solution).=</p></div>
</div>
<div class="sect3">
<h4 id="_solution_2">4.1.2. Solution 2</h4>
<div class="paragraph"><p>Deuxième solution:</p></div>
<div class="paragraph"><p>Il faut connaitre l&#8217;adresse de la télécommande (voir mode semi automatique pour récupérer l&#8217;adresse).</p></div>
<div class="paragraph"><p>Puis dans la ruche demander son nom. Par exemple pour la télécommande à l&#8217;adresse ec15</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_28_a_13_59_31.png" alt="Capture_d_ecran_2018_02_28_a_13_59_31.png" />
</span></p></div>
<div class="paragraph"><p>et immédiatement après appuyez sur un des boutons de la télécommande pour la réveiller (pas sur le bouton arrière).</p></div>
<div class="paragraph"><p>Et après un rafraichissement de l'écran vous devez avoir un objet</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_28_a_14_00_58.png" alt="Capture_d_ecran_2018_02_28_a_14_00_58.png" />
</span></p></div>
<div class="paragraph"><p>Il faut ensuite éditer les commandes en remplaçant l&#8217;adresse de la télécommande par le groupe que l&#8217;on veut contrôler</p></div>
<div class="paragraph"><p>La configuration</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_28_a_14_03_26.png" alt="Capture_d_ecran_2018_02_28_a_14_03_26.png" />
</span></p></div>
<div class="paragraph"><p>va devenir</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_02_28_a_14_03_47.png" alt="Capture_d_ecran_2018_02_28_a_14_03_47.png" />
</span></p></div>
<div class="paragraph"><p>pour le groupe 5FBD.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_nouvelle_inclusion_2">4.2. Nouvelle inclusion</h3>
<div class="ulist"><ul>
<li>
<p>
Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter&#8230;
</p>
</li>
<li>
<p>
4x sur bouton arrière
</p>
</li>
</ul></div>
<div class="paragraph"><p>Mais rien d&#8217;autre ne remonte, il faut interroger le nom pour créer l&#8217;objet.</p></div>
</div>
<div class="sect2">
<h3 id="_leave">4.3. Leave</h3>
<div class="ulist"><ul>
<li>
<p>
4x sur bouton arrière
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_groupes">4.4. Groupes</h3>
<div class="paragraph"><p>Récupérer le groupe utilisé par une télécommande</p></div>
<div class="paragraph"><p>Avoir une télécommande et une ampoule Ikea sur le même réseau Zigbee. Attention l&#8217;ampoule va perdre sa configuration. Approcher à 2 cm la télécommande de l&#8217;ampoule et appuyez pendant 10s sur le bouton à l&#8217;arrière de la télécommande avec le symbole <em>OO</em>. L&#8217;ampoule doit clignoter,  relâcher le bouton. Voilà la télécommande à affecté son groupe à l&#8217;ampoule Il suffit maintenant de faire un getGroupMemberShip depuis la ruche sur l&#8217;ampoule pour récupérer le groupe. Merci a @rkhadro pour sa trouvaille.</p></div>
<div class="paragraph"><p>Il existe un bouton « link » à côté de la pile bouton de la télécommande. 4 clicks pour appairer la télécommande à la Zigate. Un appuie long près de l’ampoule pour le touchlink.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtuelle">5. Virtuelle</h2>
<div class="sectionbody">
<div class="paragraph"><p>Télécommande Virtuelle</p></div>
<div class="paragraph"><p>La télécommande virtuelle est un objet Jeedom qui envoies les commandes Zigbee comme si c'était une vrai télécommande IKEA.</p></div>
<div class="paragraph"><p>Utiliser les commandes cachées dans la ruche:</p></div>
<div class="ulist"><ul>
<li>
<p>
Ouvrir la page commande de la ruche et trouver la commande "TRADFRI remote control".
</p>
</li>
</ul></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_03_02_a_10_34_40.png" alt="Capture_d_ecran_2018_03_02_a_10_34_40.png" />
</span></p></div>
<div class="paragraph"><p>Remplacez "/TRADFRI remote control/" l&#8217;adresse du groupe que vous voulez contrôler. Par exemple AAAA.</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_03_02_a_10_35_08.png" alt="Capture_d_ecran_2018_03_02_a_10_35_08.png" />
</span></p></div>
<div class="paragraph"><p>Sauvegardez et faites "Tester".</p></div>
<div class="paragraph"><p>Vous avez maintenant une télécommande pour contrôler le groupe AAAA.</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_03_02_a_10_35_28.png" alt="Capture_d_ecran_2018_03_02_a_10_35_28.png" />
</span></p></div>
<div class="sect2">
<h3 id="_récupération">5.1. Récupération</h3>
<div class="paragraph"><p>Récupération des appuis Télécommande Ikea dans Abeille</p></div>
<div class="paragraph"><p>Après avoir récupéré le groupe utilisé par la télécommande, vous pouvez ajouter la Zigate à ce groupe ainsi Abeille recevra les demandes de la télécommande. Attention la Zigate est limitée à 5 groupes soit disons 5 télécommandes.</p></div>
<div class="paragraph"><p>Pour ce faire dans Abeille, ajouter les groupes à l&#8217;objet "Ruche" qui représente la Zigate.</p></div>
<div class="paragraph"><p>Vous pouvez aussi forcer le groupe utilisé par la télécommande en sélectionnant la télécommande ikea, en mettant le groupe dans le champ Id puis clic sur le bouton "Set Group Remote" et dans la seconde qui suis en appuyant sur un bouton de la télécommande pour la réveiller. Il peut être nécessaire de le faire plusieurs fois du fait du timing un peu spécifique.</p></div>
<div class="paragraph"><p>C&#8217;est aussi valide pour le bouton On/Off Ikea.</p></div>
<div class="paragraph"><p><a href="https://github.com/fairecasoimeme/Zigate/issues/6">https://github.com/fairecasoimeme/Zigate/issues/6</a></p></div>
<div class="paragraph"><p>|Button   |Pres-stype  |Response  |command       |attr|
|---------|------------|----------|--------------|---------------------------------------|
|down     |click       |0x8085    |0x02          |None|
|down     |hold        |0x8085    |0x01          |None|
|down     |release     |0x8085    |0x03          |None|
|up       |click       |0x8085    |0x06          |None|
|up       |hold        |0x8085    |0x05          |None|
|up       |release     |0x8085    |0x07          |None|
|middle   |click       |0x8095    |0x02          |None|
|left     |click       |0x80A7    |0x07          |direction: 1|
|left     |hold        |0x80A7    |0x08          |direction: 1    &#8658; can t get that one|
|right    |click       |0x80A7    |0x07          |direction: 0|
|right    |hold        |0x80A7    |0x08          |direction: 0    &#8658; can t get that one|
|left/right |release   |0x80A7    |0x09          |None            &#8658; can t get that one|</p></div>
<div class="paragraph"><p>down = brightness down, up = brightness up,
middle = Power button,
left and right = when brightness up is up left is left and right is right.
Holding down power button for ~10 sec will result multiple commands sent, but it wont send any hold command only release.
Remote won&#8217;t tell which button was released left or right, but it will be same button that was last hold.
Remote is unable to send other button commands at least when left or right is hold down.</p></div>
<div class="paragraph"><p>Reponse 0x8085 correspond à l&#8217;info Up-Down dans le widget.
Reponse 0x8095 correspond à l&#8217;info Click-Middle dans le widget.
Reponse 0x80A7 correspond à l&#8217;info Left-Right-Cmd et Left-Right-Direction dans le widget.</p></div>
<div class="paragraph"><p>A partir de la vous pouvez déclencher des scénarii dans Jeedom.
Attention lors de l&#8217;utilisation de la télécommande, dans Abeille elle sera mis a jour et vos scénarii déclenchés mais si vous avez des équipements Zigbee sur ce groupe ils seront aussi activés.
Par exemple vous pouvez avoir une Ampoule Ikea sur le groupe de la télécommande qui réagira aux demandes de la télécommande directement en Zigbee (même si Jeedom est HS) et avoir un scénario qui se déclenche en même temps pour ouvrir les volets en zwave ou autre.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gradateur">6. Gradateur</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_un_clic_sur_oo">6.1. Un clic sur OO</h3>
<div class="paragraph"><p>Un clic sur OO envoie un Beacon Request. Même si la zigate est en inclusion, il n&#8217;y a pas d&#8217;association (Probablement le cas si déjà associé à un autre réseau).</p></div>
</div>
<div class="sect2">
<h3 id="_4_clics_sur_oo">6.2. 4 clics sur OO</h3>
<div class="paragraph"><p>Message Leave, puis Beacon Requets puis association si réseau en mode inclusion. Une fois associé, un getName avec un réveil du gradateur permet de récupérer le nom.</p></div>
<div class="paragraph"><p>Voir la télécommande 5 boutons pour avoir plus de détails sur le contrôle de groupe,&#8230;</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prise">7. Prise</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_nouvelle_inclusion_3">7.1. Nouvelle inclusion</h3>
<div class="ulist"><ul>
<li>
<p>
Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter&#8230;
</p>
</li>
<li>
<p>
Faire un reset de la prise en insérant un petit trombone dans le trou pres de la led de la prise. Attendre 5s, la prise doit apparaitre dans Jeedom.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_télécommande_2">8. Télécommande</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_nouvelle_inclusion_4">8.1. Nouvelle inclusion</h3>
<div class="ulist"><ul>
<li>
<p>
Mettre la Zigate en mode inclusion (Bouton Inclusion), la Led bleue de la Zigate doit clignoter&#8230;
</p>
</li>
<li>
<p>
Prendre la telecommande Ikea et faire 4 appuis sur le bouton OO au dos de la télécommande. La télécommande doit se mettre à flasher rouge en face avant. La télécommande doit apparaitre dans Jeedom.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simuler_la_télécommande">9. Simuler la télécommande</h2>
<div class="sectionbody">
<div class="paragraph"><p>Cette opération est un peu délicate mais doit permettre de récupérer l&#8217;adresse de groupe utilisée par la télécommande suite aux opérations ci dessus. Dans le futur ce devrait être automatique.</p></div>
<div class="paragraph"><p>Aller dans la page de configuration du plugin et clic sur "Network" pour faire apparaitre les paramètres dans l&#8217;Ampoule:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_30_24.png" alt="Capture_d_ecran_2018_10_30_a_11_30_24.png" />
</span></p></div>
<div class="paragraph"><p>Sur l&#8217;objet Ampoule vous devez vous le champ "Groups" apparaitre sans information:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_36_43.png" alt="Capture_d_ecran_2018_10_30_a_11_36_43.png" />
</span></p></div>
<div class="paragraph"><p>Recuperons l&#8217;adresse de l ampoule, en ouvrant la page de configuration de l ampoule:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_42_09.png" alt="Capture_d_ecran_2018_10_30_a_11_42_09.png" />
</span></p></div>
<div class="paragraph"><p>Le champ "Topic Abeille" contient l&#8217;adresse, ici "9252".</p></div>
<div class="paragraph"><p>Interrogeons maintenant l&#8217;ampoule, avec un getGroupMemberShip depuis l objet Ruche:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_45_23.png" alt="Capture_d_ecran_2018_10_30_a_11_45_23.png" />
</span></p></div>
<div class="paragraph"><p>Indiquez l&#8217;adresse de l ampoule.</p></div>
<div class="paragraph"><p>Maintenant le champ "Groups" de l&#8217;ampoule doit contenir l&#8217;adresse de groupe:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_47_24.png" alt="Capture_d_ecran_2018_10_30_a_11_47_24.png" />
</span></p></div>
<div class="paragraph"><p>ici le groupe utilisé par la télécommande est "f65d".</p></div>
<div class="paragraph"><p>Maintenant nous pouvons mettre à jour la télécommande dans Jeedom. Ouvrez les commandes de la télécommande:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_50_17.png" alt="Capture_d_ecran_2018_10_30_a_11_50_17.png" />
</span></p></div>
<div class="paragraph"><p>Dans le champ "Topic" des commandes vous pouvez voir le texte \=addrGroup= qu&#8217;il faut remplacer par la valeur du groupe, ici "f65d" et sauvegarder.</p></div>
<div class="paragraph"><p>Cela donne:</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_54_51.png" alt="Capture_d_ecran_2018_10_30_a_11_54_51.png" />
</span></p></div>
<div class="paragraph"><p>Maintenant vous pouvez commander votre ampoule depuis la Télécommande physique et depuis la Télécommande Jeedom.</p></div>
<div class="paragraph"><p><span class="image">
<img src="../images/Capture_d_ecran_2018_10_30_a_11_58_42.png" alt="Capture_d_ecran_2018_10_30_a_11_58_42.png" />
</span></p></div>
<div class="paragraph"><p>PS: Les scénarios ne sont pas implémentés pour l&#8217;instant (30/10/2018):</p></div>
<div class="ulist"><ul>
<li>
<p>
Sc1, Sc2, SC3 sur la télécommande dans Jeedom,
</p>
</li>
<li>
<p>
et les boutons "Fleche Gauche", "Fleche Droite" de la télécommande physique.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2019-03-13 18:00:25 CET
</div>
</div>
</body>
</html>
